/**
 * @fileOverview Firestore Security Rules for CineStream application.
 *
 * Core Philosophy:
 * This ruleset prioritizes a secure, user-centric data access model. It enforces strict ownership for user-specific data while allowing public read access for certain collections. The existence of a document in `/roles_admin/{userId}` determines admin status.
 *
 * Data Structure:
 * - User-specific data is nested under `/users/{userId}`, including subscriptions, token purchase history, and service token history.
 * - Categories are stored in the top-level `/categories/{categoryId}` collection.
 * - Videos are stored under the category path `/categories/{categoryId}/videos/{videoId}`.
 * - Video logs are stored under the user path `/users/{userId}/videoLogs/{videoLogId}`.
 * - Pricing information is stored in a singleton document at `/settings/pricing`.
 * - Admin status is determined by the existence of a document in `/roles_admin/{userId}`.
 *
 * Key Security Decisions:
 * - Listing of all users is explicitly denied.
 * - Public read access is granted to the `/categories` collection to allow unauthenticated users to browse categories.
 * - Admin privileges are determined by document existence in `/roles_admin/{userId}`.
 * - Data validation is limited to fields critical for authorization and relational integrity.
 *
 * Denormalization for Authorization:
 *  - No denormalization is required in this version since authorization is granted openly for authenticated users.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      // WARNING: Insecure rules for development. Allows all reads and writes.
      allow read, write: if true;
    }
  }
}
